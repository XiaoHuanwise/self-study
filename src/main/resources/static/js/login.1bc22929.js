(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"29e9":function(e,t,a){"use strict";t["a"]={appKey:"lemon",appSecret:"7a858ff32628843043524b729cedfaa70623efc9",domain:"selfstudy.twt.edu.cn",baseURL:"https://selfstudy.twt.edu.cn/",extraBaseUrl:"https://api.twt.edu.cn/"}},"6f39":function(e,t,a){"use strict";a("a59a")},a59a:function(e,t,a){},b32d:function(e,t,a){"use strict";var n=a("1da1"),s=(a("e7e5"),a("d399")),r=(a("96cf"),a("99af"),a("d3b7"),a("bc3a")),c=a.n(r),o=a("6ac5"),u=a("b383"),i=a.n(u),d=a("29e9"),p=d["a"].appKey,m=d["a"].appSecret,b=d["a"].domain,l=d["a"].baseURL,f=c.a.create({baseURL:l,timeout:5e3,withCredentials:!0,transformRequest:[function(e,t){if(!t["Content-Type"])return t["Content-Type"]="application/x-www-form-urlencoded",i.a.stringify(e);switch(t["Content-Type"]){case"multipart/form-data":return e;case"application/json":return JSON.stringify(e);default:return i.a.stringify(e)}}],headers:{domain:b,"Access-Control-Allow-Credentials":"true",ticket:window.btoa("".concat(p,".").concat(m))}});f.interceptors.request.use((function(e){return e.loading&&s["a"].loading({message:"加载中...",forbidClick:!0}),e.headers["token"]=Object(o["a"])(),e}),(function(e){Promise.reject(e)})),f.interceptors.response.use(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s["a"].clear(),a=t.data,0===a.error_code){e.next=6;break}return e.abrupt("return",Promise.reject(new Error(a.message||"Error")));case 6:return e.abrupt("return",Promise.resolve(a));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){if(s["a"].clear(),e&&e.response)switch(e.response.status){case 400:e.message="请求错误(400)";break;case 401:e.message="未授权,请登录(401)";break;case 403:e.message="拒绝访问(403)";break;case 404:e.message="请求地址出错: ".concat(e.response.config.url);break;case 405:e.message="请求方法未允许(405)";break;case 408:e.message="请求超时(408)";break;case 500:e.message="服务器内部错误(500)";break;case 501:e.message="服务未实现(501)";break;case 502:e.message="网络错误(502)";break;case 503:e.message="服务不可用(503)";break;case 504:e.message="网络超时(504)";break;case 505:e.message="HTTP版本不受支持(505)";break;default:e.message="连接错误: ".concat(e.message)}else"Network Error"==e.message&&e.message,e.message="连接到服务器失败，请联系管理员";return Object(s["a"])(e.message),Promise.reject(e)})),t["a"]=f},d9c9:function(e,t,a){"use strict";a.r(t);var n=a("7a23"),s=Object(n["O"])("data-v-20cd2778");Object(n["A"])("data-v-20cd2778");var r={class:"home-container"},c={class:"warpper"},o=Object(n["j"])("h2",{class:"title"},"登录天外天账号",-1),u={style:{margin:"16px"}},i=Object(n["i"])(" 登录 ");Object(n["y"])();var d=s((function(e,t,a,d,p,m){var b=Object(n["E"])("van-field"),l=Object(n["E"])("van-button"),f=Object(n["E"])("van-form"),g=Object(n["E"])("van-tab"),j=Object(n["E"])("van-tabs");return Object(n["x"])(),Object(n["g"])("div",r,[Object(n["j"])("div",c,[o,Object(n["j"])(j,{active:e.active,"onUpdate:active":t[3]||(t[3]=function(t){return e.active=t}),color:"#00a0e9"},{default:s((function(){return[Object(n["j"])(g,{class:"tab",title:"密码登录"},{default:s((function(){return[Object(n["j"])(f,{onSubmit:e.onSubmitPwd},{default:s((function(){return[Object(n["j"])(b,{modelValue:e.state.username,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.state.username=t}),name:"username",placeholder:"邮箱/用户名/学号",rules:[{required:!0,message:"请填写邮箱/用户名/学号"}]},null,8,["modelValue"]),Object(n["j"])(b,{modelValue:e.state.password,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.state.password=t}),type:"password",name:"password",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),Object(n["j"])("div",u,[Object(n["j"])(l,{round:"",block:"",type:"primary","native-type":"submit"},{default:s((function(){return[i]})),_:1})])]})),_:1},8,["onSubmit"])]})),_:1})]})),_:1},8,["active"])])])})),p=(a("9a83"),a("f564")),m=a("b32d");function b(e){return Object(m["a"])({url:"login/phoneMsg",method:"post",data:e})}function l(e){return Object(m["a"])({url:"login/common",method:"post",data:e})}function f(e){return Object(m["a"])({url:"login/phone",method:"post",data:e})}var g=a("6ac5"),j=a("d257"),O=a("afbc"),h=Object(n["k"])({name:"Login",props:{},setup:function(){var e=/^(13[0-9]|14[01456879]|15[0-3,5-9]|16[2567]|17[0-8]|18[0-9]|19[0-3,5-9])\d{8}$/,t=Object(n["C"])(0),a=Object(j["a"])("from"),s=Object(n["B"])({tel:"",sms:"",username:"",password:""}),r=function(e){var t={account:e.username,password:e.password};console.log(e),l(t).then((function(e){Object(g["c"])(e.data.token),Object(p["a"])({type:"success",message:"登录成功"}),a?O["a"].push({path:a}):O["a"].push({path:"/home"})})).catch((function(e){Object(p["a"])({type:"danger",message:e.data.message})}))},c=function(e){var t={phone:e.tel,code:e.sms};console.log(e),f(t).then((function(e){Object(g["c"])(e.data.token),Object(p["a"])({type:"success",message:"登录成功"}),a?O["a"].push({path:a}):O["a"].push({path:"/home"})})).catch((function(e){Object(p["a"])({type:"danger",message:e.data.message})}))},o=function(e){var t={phone:e};console.log(e),b(t).then((function(e){Object(p["a"])({type:"primary",message:"短信发送成功"}),Object(g["b"])(e.data.cookie)})).catch((function(e){Object(p["a"])({type:"danger",message:e.data.message})}))};return{active:t,state:s,onSubmitPwd:r,onSubmitSMS:c,sendSMS:o,pattern:e}}});a("6f39");h.render=d,h.__scopeId="data-v-20cd2778";t["default"]=h}}]);